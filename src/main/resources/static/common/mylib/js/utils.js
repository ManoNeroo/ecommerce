const PAGE_ALERT_CLOSE_BTN=document.querySelector("#page-alert .close");function toggleLoading(t){const e=document.getElementById("page-loading");t?e.classList.add("active"):e.classList.remove("active")}function handleClickCloseAlert(t){t.preventDefault(),hideAlert()}function showAlert(t,e,n){const a=document.getElementById("page-alert");if(a){const i=a.querySelector(".title"),s=a.querySelector(".fas"),c=a.querySelector(".message");switch(hideAlert(),t){case"success":a.classList.add("alert-success"),s.classList.add("fa-check");break;case"warning":a.classList.add("alert-warning"),s.classList.add("fa-exclamation-triangle");break;case"failed":a.classList.add("alert-danger"),s.classList.add("fa-ban")}i.innerText=e,c.innerText=n,a.classList.add("active"),setTimeout(hideAlert,2500)}}function hideAlert(){const t=document.getElementById("page-alert");if(t){const e=t.querySelector(".title"),n=t.querySelector(".fas"),a=t.querySelector(".message");t.classList.remove("alert-success"),t.classList.remove("alert-warning"),t.classList.remove("alert-danger"),n.classList.remove("fa-check"),n.classList.remove("fa-exclamation-triangle"),n.classList.remove("fa-ban"),e.innerText="",a.innerText="",t.classList.remove("active")}}function getFormData(t){const e=new FormData(t);let n={};return e.forEach(function(t,e){n[e]=t}),n}async function httpClient(t,e="GET",n=null){const a=window.location.origin+t;let i={method:e};n instanceof FormData?i.body=n:(i.body=n?JSON.stringify(n):null,i.headers={"Content-Type":"application/json"});const s=await fetch(a,i);return 200==s.status||201==s.status?s.json():(console.clear(),{isSuccess:!1,status:s.status})}async function uploadFile(t){const e=new FormData;return e.append("file",t),await httpClient("/api/upload","POST",e)}function removeAccent(t){for(var e=["aàảãáạăằẳẵắặâầẩẫấậ","AÀẢÃÁẠĂẰẲẴẮẶÂẦẨẪẤẬ","dđ","DĐ","eèẻẽéẹêềểễếệ","EÈẺẼÉẸÊỀỂỄẾỆ","iìỉĩíị","IÌỈĨÍỊ","oòỏõóọôồổỗốộơờởỡớợ","OÒỎÕÓỌÔỒỔỖỐỘƠỜỞỠỚỢ","uùủũúụưừửữứự","UÙỦŨÚỤƯỪỬỮỨỰ","yỳỷỹýỵ","YỲỶỸÝỴ"],n=0;n<e.length;n++){var a=new RegExp("["+e[n].substr(1)+"]","g"),i=e[n][0];t=t.replace(a,i)}return t}function numberInput(){document.querySelectorAll(".is-number").forEach(t=>{t.addEventListener("keyup",handleNumberInput)})}function handleNumberInput(t){const{target:e}=t;let{value:n}=e;n=n.replace(/\D/g,"").replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"),e.value=n}function formatNumber(t,e=/(\d)(?=(\d\d\d)+(?!\d))/g,n="$1,"){if("number"==typeof t){let a=t.toString().split(".");return a[0]=a[0].replace(e,n),a.join(".")}return t}function showDialog(t,e,n,a){const i=document.createElement("div");i.className="modal fade",i.id="page-dialog",i.innerHTML=`<div class="modal-dialog modal-dialog-centered"><div class="modal-content">\n\t\t\t\t\t\t<div class="modal-header"><h5 class="modal-title">${n}</h5>\n\t\t\t\t\t\t<button type="button" class="close" data-dismiss="modal" aria-label="Close">\n\t\t\t\t\t\t<span aria-hidden="true">&times;</span></button></div><div class="modal-body">\n\t\t\t\t\t\t<span class="icon icon-${e}"><svg viewBox="0 0 24 24"><path d="${{success:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z",warning:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z",danger:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"}[e]}"></path></svg>\n\t\t\t\t\t\t</span><span class="ml-3">${a}</span></div><div class="modal-footer"></div></div></div>`;const s=i.querySelector(".modal-footer");s.innerHTML=function(){let n=[];n.push(`btn-outline-${e}`),"confirm"==t&&n.push(`btn-${e}`);let a="confirm"==t?"Đóng":"Ok",i=`<button data-dismiss="modal" class="btn ${n[0]}">${a}</button>`;2==n.length&&(i+=`<button class="btn btn-confirm ${n[1]}">Xác nhận</button>`);return i}();const c=s.querySelector(".btn-confirm");function o(){setTimeout(()=>{i.remove()},300)}return c&&c.addEventListener("click",function(t){t.preventDefault();const e=new Event("confirm");i.dispatchEvent(e),$("#page-dialog").modal("hide")}),document.body.appendChild(i),setTimeout(()=>{$("#page-dialog").modal("show"),$("#page-dialog").on("hidden.bs.modal",o)},0),i}function checkRole(t,e){const n=["ROLE_CUSTOMER","ROLE_EMPLOYEE","ROLE_MANAGER","ROLE_ADMIN"];let a=!1;return t.forEach(t=>{t.authority==n[e]&&(a=!0)}),a}function generateNotificationItem(t,e=!1){t.isSmall=e;const n=document.createElement("div");let a=t.createdAt.slice(0,10).split("-").reverse().join("-");a=t.createdAt.slice(11,16)+" "+a,n.className="page-notification",n.setAttribute("data-id",t.id),!t.hasRead&&n.classList.add("unread"),n.innerHTML=`<a href="${t.link}" target="_blank" class="notification-main"><div class="notification-img">\n\t<img src="${t.image}"></div><div class="notification-content"><div class="title">${t.title}</div>\n\t<div class="content">${t.content}</div>${e?"":`<div class="time">${a}</div>`}</div>\n\t</a><div class="notification-action"><span class="icon"><svg viewBox="0 0 24 24">\n\t<path d="M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z">\n\t</path></svg></span></div>`;const i=n.querySelector(".notification-action .icon");return i.addEventListener("click",function(){const e=function(){const e=document.createElement("div");e.className="action-dropdown",e.innerHTML=`<div class="action-dropdown-wrapper"><div class="action-item mark-notification">\n\t\t<span class="action-item-icon"><svg viewBox="0 0 24 24">\n\t\t<path d="M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"></path></svg></span>\n\t\t<span class="action-item-text">${t.hasRead?"Đánh dấu chưa đọc":"Đánh dấu đã đọc"}</span></div><div class="action-item view-notification"><span class="action-item-icon">\n\t\t<svg viewBox="0 0 24 24"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"></path>\n\t\t</svg></span><span class="action-item-text">Xem chi tiết</span></div></div><div class="action-dropdown-arrow"></div>`;const a=e.querySelector(".mark-notification"),i=e.querySelector(".view-notification");return a.onclick=function(){const a=new CustomEvent("mark",{detail:t});n.dispatchEvent(a),setTimeout(function(){e.remove()},0)},i.onclick=function(){const a=new CustomEvent("view",{detail:t});n.dispatchEvent(a),setTimeout(function(){e.remove()},0)},e}();i.insertAdjacentElement("afterend",e),setTimeout(function(){$("body").click(function(t){var n=$(t.target);n.is(".action-dropdown")||n.is(".action-dropdown *")||e.remove()})},0)}),n.querySelector(".notification-main").addEventListener("click",e=>{e.preventDefault();const a=new CustomEvent("view",{detail:t});n.dispatchEvent(a)}),n}PAGE_ALERT_CLOSE_BTN&&PAGE_ALERT_CLOSE_BTN.addEventListener("click",handleClickCloseAlert);