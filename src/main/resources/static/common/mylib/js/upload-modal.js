const E_UPLOAD_TIME_TRANSITION=300;class uploadModal{constructor(){this.element=initEUploadModal()}onUpload(e){this.element.addEventListener("upload",t=>{e(t.detail.resource)})}}function initEUploadModal(){const e=document.createElement("div"),t=document.createElement("div"),a=document.createElement("div"),l=document.createElement("h4"),o=document.createElement("span"),n=document.createElement("div"),d=document.createElement("label"),c=document.createElement("div"),s=document.createElement("input"),i=document.createElement("span"),p=document.createElement("div"),u=document.createElement("button"),m=document.createElement("button");return o.innerHTML="<svg viewBox='0 0 24 24'><path d='M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z'></path></svg>",i.innerHTML="<svg viewBox='0 0 24 24'><path d='M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V8h16v10zM8 13.01l1.41 1.41L11 12.84V17h2v-4.16l1.59 1.59L16 13.01 12.01 9 8 13.01z'></path></svg>",a.append(l,o),c.append(s,i),n.append(d,c),p.append(u,m),e.append(a,n,p),t.className="e-upload-overlay",e.className="e-upload",a.className="e-upload-header",l.className="e-upload-title",l.innerText="Upload ảnh",o.className="e-upload-close-btn e-upload-btn e-upload-icon",n.className="e-upload-body",d.innerText="Nguồn",c.className="e-upload-resource",s.type="text",s.placeholder="Đường dẫn hình ảnh",s.className="e-upload-resource-input",i.className="e-upload-btn e-upload-file-exp e-upload-icon",p.className="e-upload-footer",u.type="button",u.className="e-upload-close-btn e-upload-btn e-upload-footer-close",u.innerText="Đóng",m.type="button",m.className="e-upload-footer-save e-upload-btn",m.innerText="Ok",document.body.append(e,t),setTimeout(()=>{document.body.classList.add("e-upload-htmlbody"),e.classList.add("active"),t.classList.add("active")},0),setTimeout(()=>{s.focus()},E_UPLOAD_TIME_TRANSITION),t.addEventListener("click",()=>handleCloseEUploadModal(e,t)),u.addEventListener("click",()=>handleCloseEUploadModal(e,t)),o.addEventListener("click",()=>handleCloseEUploadModal(e,t)),i.addEventListener("click",()=>handleEUploadUploadFile(s)),m.addEventListener("click",()=>handleEUploadClickOk(e,t,s)),e}function handleCloseEUploadModal(e,t){setTimeout(()=>{document.body.classList.remove("e-upload-htmlbody"),e.remove(),t.remove()},E_UPLOAD_TIME_TRANSITION),e.classList.remove("active"),t.classList.remove("active")}function handleEUploadUploadFile(e){const t=document.createElement("input");t.setAttribute("type","file"),t.setAttribute("accept","image/*"),t.onchange=async function(){var t=this.files[0];const a=new FormData;a.append("file",t);const l=await httpClient("/api/upload","POST",a);l.isSuccess?e.value=l.data:showAlert("failed","Lỗi","Có lỗi xảy ra trong quá trình upload file!"),e.focus()},t.click()}function handleEUploadClickOk(e,t,a){const l=a.value.trim();if(/(http(s)?:\/\/.)?(www\.)?([-a-zA-Z0-9@:%._\+~#=]{2,256})?(\.[a-z]{2,6})?([-a-zA-Z0-9@:%_\+.~#?&//=]*)/.test(l)&&""!=l&&!/^\/+$/.test(l)){const a=new CustomEvent("upload",{detail:{resource:l}});e.dispatchEvent(a),handleCloseEUploadModal(e,t)}}