class TechnicalDataTable{constructor(e){1!==e.nodeType&&(e=document.querySelector(e)),this.table=initTechnicalDataTable(e),this.data=[]}setData(e){Array.isArray(e)&&e.forEach(e=>{this.addRow(e)})}clearData(){this.data=[],this.table.tBodies[0].innerHTML=""}addRow(e){if(e&&e.hasOwnProperty("id")&&e.hasOwnProperty("name")&&e.hasOwnProperty("value")){this.data.push(e);const t=addTableRow(e);return this.table.tBodies[0].appendChild(t),t}return null}editRow(e){if(e&&e.hasOwnProperty("id")&&e.hasOwnProperty("name")&&e.hasOwnProperty("value")){const t=this.table.tBodies[0].querySelector(`tr[data-id='${e.id}']`);if(t){const n=this.data.findIndex(t=>t.id==e.id);return this.data.splice(n,1,e),t.cells[0].innerText=e.name,t.cells[1].innerText=e.value,t}}return null}removeRow(e){const t=this.table.tBodies[0].querySelector(`tr[data-id='${e}']`);if(t){const n=this.data.findIndex(t=>t.id==e);return this.data.splice(n,1),this.table.tBodies[0].removeChild(t),t}return null}}class TechnicalDataForm{constructor(e){1!==e.nodeType&&(e=document.querySelector(e)),this.element=initTechnicalDataForm(e),this.data=[],this.element.querySelector(".technical-row-add button").addEventListener("click",handleAddRowField.bind(this))}clearData(){this.data=[];const e=document.createElement("div"),t=document.createElement("button");t.type="button",t.className="add-row-btn",t.innerHTML='<svg viewBox="0 0 24 24">\n        <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path>\n        </svg>',e.className="technical-row-add",e.appendChild(t),this.element.innerHTML="",this.element.appendChild(e),t.addEventListener("click",handleAddRowField.bind(this))}onAddRow(e){this.element.addEventListener("addRow",t=>{e(t.detail.rowData)})}onEditRow(e){this.element.addEventListener("editRow",t=>{e(t.detail.rowData)})}onRemoveRow(e){this.element.addEventListener("removeRow",t=>{e(t.detail.rowId)})}setData(e){Array.isArray(e)&&e.forEach(e=>{this.addRow(e)})}addRow(e){if(e&&e.hasOwnProperty("name")&&e.hasOwnProperty("value")){e.id||(e.id=generateId(10)),this.data.push(e);const t=addFieldRow(e),n=t.querySelector("input[name='name']"),a=t.querySelector("input[name='value']"),d=t.querySelector("button"),i=this.element.querySelector(".technical-row-add");n.addEventListener("keyup",handleEditRow.bind(this)),a.addEventListener("keyup",handleEditRow.bind(this)),d.addEventListener("click",handleRemoveRow.bind(this)),this.element.insertBefore(t,i);const r=new CustomEvent("addRow",{detail:{rowData:e}});return this.element.dispatchEvent(r),t}return null}editRow(e){if(e&&e.hasOwnProperty("id")&&e.hasOwnProperty("name")&&e.hasOwnProperty("value")){const t=this.element.querySelector(`.technical-row[data-id='${e.id}']`);if(t){const n=t.querySelector("input[name='name']"),a=t.querySelector("input[name='value']"),d=this.data.findIndex(t=>t.id==e.id);this.data.splice(d,1,e),n.value=e.name,a.value=e.value;const i=new CustomEvent("editRow",{detail:{rowData:e}});return this.element.dispatchEvent(i),t}}}removeRow(e){const t=this.element.querySelector(`.technical-row[data-id='${e}']`);if(t){const n=this.data.findIndex(t=>t.id==e);this.data.splice(n,1);const a=new CustomEvent("removeRow",{detail:{rowId:e}});return this.element.dispatchEvent(a),this.element.removeChild(t),t}}}function handleEditRow(e){var{target:t}=e,{value:n}=t,a=t.parentElement,{id:d}=a.dataset,i={id:d};if("name"==t.name){i.name=n;const e=t.nextElementSibling;i.value=e.value}else{i.value=n;const e=t.previousElementSibling;i.name=e.value}this.editRow(i)}function generateId(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=n.length,d=0;d<e;d++)t+=n.charAt(Math.floor(Math.random()*a));return t}function handleAddRowField(){this.addRow({name:"",value:""})}function handleRemoveRow(e){var{target:t}=e,n=t.parentElement;"svg"==t.nodeName?n=n.parentElement:"path"==t.nodeName&&(n=n.parentElement.parentElement);var{id:a}=n.dataset;this.removeRow(a)}function addTableRow(e){const t=document.createElement("tr"),n=document.createElement("td"),a=document.createElement("td");return t.setAttribute("data-id",e.id),n.innerText=e.name,a.innerText=e.value,t.append(n,a),t}function addFieldRow(e){const t=document.createElement("div"),n=document.createElement("input"),a=document.createElement("input"),d=document.createElement("button");return t.className="technical-row",t.setAttribute("data-id",e.id),n.type="text",n.name="name",n.placeholder="Tên thông số",n.value=e.name,a.type="text",a.name="value",a.placeholder="Giá trị thông số",a.value=e.value,d.type="button",d.innerHTML='<svg viewBox="0 0 24 24">\n    <path d="M19 13H5v-2h14v2z"></path>\n</svg>',t.append(n,a,d),t}function initTechnicalDataTable(e){const t=document.createElement("table"),n=document.createElement("tbody");return t.className="technical-data-table",t.appendChild(n),e.innerHTML="",e.appendChild(t),t}function initTechnicalDataForm(e){const t=document.createElement("div"),n=document.createElement("div"),a=document.createElement("button");return a.type="button",a.className="add-row-btn",a.innerHTML='<svg viewBox="0 0 24 24">\n    <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path>\n</svg>',n.className="technical-row-add",t.className="technical-fields",n.appendChild(a),t.appendChild(n),e.innerHTML="",e.appendChild(t),t}