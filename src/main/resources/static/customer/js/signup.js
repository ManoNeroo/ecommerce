!function(){const e=document.getElementById("form-register"),t=e&&e.querySelector("input[name='phoneNumber']");t&&t.addEventListener("keyup",e=>{const{target:t}=e;let{value:n}=t;n=n.replace(/\D/g,""),t.value=n}),e.addEventListener("submit",async function(t){if(t.preventDefault(),function(e){const t=getFormData(e),{userName:n,firstName:r,lastName:i,phoneNumber:o,password:s,matchingPassword:h}=t,a=/^[a-z][a-z\d]{4,}$/;let l=!0;const c=e.querySelector(".userName-error"),m=e.querySelector(".firstName-error"),u=e.querySelector(".lastName-error"),g=e.querySelector(".phoneNumber-error"),p=e.querySelector(".password-error"),d=e.querySelector(".matchingPassword-error");return null!=n&&(""==n.trim()?(l=!1,c.innerText="Nhập tên đăng nhập!"):a.test(n.trim())||(l=!1,c.innerText="Tên đăng nhập không hợp lệ!")),""==r.trim()?(l=!1,m.innerText="Nhập tên họ!"):/^[a-z][a-z\d\s]{2,}$/i.test(removeAccent(r.trim()))||(l=!1,m.innerText="Tên họ không hợp lệ"),""==i.trim()?(l=!1,u.innerText="Nhập tên!"):/^[a-z][a-z\d\s]{2,}$/i.test(removeAccent(i.trim()))||(l=!1,u.innerText="Tên không hợp lệ!"),""==o.trim()?(l=!1,g.innerText="Nhập số điện thoại!"):/^(0|\+84)(\s|\.)?((3[2-9])|(5[689])|(7[06-9])|(8[1-689])|(9[0-46-9]))(\d)(\s|\.)?(\d{3})(\s|\.)?(\d{3})$/.test(o.trim())||(l=!1,g.innerText="Số điện thoại không hợp lệ!"),null!=s&&(""==s.trim()?(l=!1,p.innerText="Nhập mật khẩu!"):s.trim().length<6?(l=!1,p.innerText="Mật khẩu phải từ 6 ký tự trở lên!"):""==h.trim()?(l=!1,d.innerText="Nhập lại mật khẩu!"):h.trim()!=s.trim()&&(l=!1,d.innerText="Mật khẩu không khớp!")),l}(e)){const t=getFormData(e);t.roleIxs=[4],t.gender=!1,toggleLoading(!0);const n=await httpClient("/api/account","POST",t);n.isSuccess?(showAlert("success","Thành công","Đăng ký tài khoản thành công!"),setTimeout(function(){window.location.href="/login"},1e3)):showAlert("failed","Thất bại","Tài khoản đã tồn tại, vui lòng thử lại!"),toggleLoading(!1)}}),e&&e.querySelectorAll(".form-control").forEach(e=>{e.addEventListener("focus",e=>{const{target:t}=e,n=t.nextElementSibling;n&&(n.innerText="")})})}();