async function loadCartNumberItem(){if(g_sUserName){const t=await httpClient(`/api/cart/${g_sUserName}/numberitem`);if(t.isSuccess){let e=t.data;if(e>0){const t=document.querySelector(".header-top-menu ul .cart number-item")||document.createElement("span"),n=document.querySelector(".header-top-menu ul .cart");t.className="number-item",t.innerText=e,n.appendChild(t)}}}}function generateProductItem(t,e){const n=document.createElement("div"),a=document.createElement("a"),r=document.createElement("p"),i=document.createElement("h3"),c=document.createElement("p"),s=document.createElement("div"),o=document.createElement("p"),l=document.createElement("label"),m=generateStarList(t.avgStar,"size-1"),d="product-item "+e;n.className=d,s.append(m,o),s.className="product-vote",a.append(r,i,c,s,l),n.appendChild(a),a.href="/product/"+t.id,a.title=t.name,r.innerHTML=`<img src="${t.avatar}" alt="${t.name}">`,r.className="product-picture",i.className="product-name",i.innerText=t.name,c.className="product-promo-price";let u=`${formatNumber(t.promoPrice)}<span>đ</span>`;return t.promoPrice!=t.price&&(u+=`<del class="product-price">${formatNumber(t.price)}<span>đ</span></del>`),c.innerHTML=u,o.innerText=`(${formatNumber(t.numberVote)} đánh giá)`,l.className="product-promo",t.priceOff>0&&(l.innerText=`Giảm ${formatNumber(t.priceOff)} ₫`),n}function generateStarList(t,e){const n="M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z",a=document.createElement("ul"),r="star-list "+e;a.className=r;let i=0;for(let e=1;e<=5;e++){const r=document.createElement("li");if(t<e){const a=e-t;a<.2&&a>=0?(r.innerHTML=`<svg viewBox="0 0 24 24"><path d="${n}"></path></svg>`,i+=1):a>=.2&&a<.65?(r.innerHTML='<svg viewBox="0 0 24 24"><path d="m22 9.24-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4V6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"></path></svg>',i+=.5):r.innerHTML='<svg viewBox="0 0 24 24"><path d="m22 9.24-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"></path></svg>'}else r.innerHTML=`<svg viewBox="0 0 24 24"><path d="${n}"></path></svg>`,i+=1;a.appendChild(r)}return a.setAttribute("data-star",i),a}!function(){const t=document.querySelector(".header-search form"),e=t.querySelector("input"),n=$("#header .header-top");function a(){const t=document.querySelector(".overlay-suggest");t&&t.remove(),function(){const t=document.querySelector(".header-search-suggest"),e=t.querySelector(".suggest-title"),n=t.querySelector("ul");t.classList.remove("active"),e.innerText="",n.innerHTML=""}()}async function r(){const t=e.value.trim();if(""!=t){const e=await httpClient("/api/product/topbyname?top=5&status=true&name="+t);if(e.isSuccess)return e.data}return null}function i(t){const e=document.querySelector(".header-search-suggest"),n=e.querySelector(".suggest-title"),a=e.querySelector("ul"),r=[{link:"/search?keyword=iPhone",text:"iPhone"},{link:"/search?keyword=ipad",text:"iPad"},{link:"/search?keyword=macbook",text:"Macbook"},{link:"/search?keyword=samsung galaxy",text:"Samsung Galaxy"},{link:"/search?keyword=oppo",text:"OPPO"},{link:"/search?keyword=xiaomi",text:"Xiaomi"}];e.classList.add("active"),n.classList.remove("text-danger"),a.innerHTML="",null!=t?t.length>0?(n.innerText="Kết quả gợi ý",t.forEach(t=>{const e=document.createElement("li"),n=function(t){const e=document.createElement("a");return e.href="/product/"+t.id,e.innerHTML=`<div class="suggest-item">\n\t\t\t\t\t\t\t<div class="suggest-item-img"><img src="${t.avatar}" alt="${t.name}"></div>\n\t\t\t\t\t\t\t<div class="suggest-item-info">\n\t\t\t\t\t\t\t\t<h3 class="suggest-item-name">${t.name}</h3>\n\t\t\t\t\t\t\t\t<div class="suggest-item-promo-price">${formatNumber(t.promoPrice)}₫\n\t\t\t\t\t\t\t\t\t<del class="suggest-item-price">${t.promoPrice!=t.price?formatNumber(t.price)+"₫":""}</del>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>`,e}(t);e.className="hits-item",e.appendChild(n),a.appendChild(e)})):(n.innerText="Không có kết quả nào!",n.classList.add("text-danger")):(n.innerText="Xu hướng tìm kiếm",r.forEach(t=>{const e=document.createElement("li");e.innerHTML=`<a href="${t.link}">${t.text}</a>`,a.appendChild(e)}))}!async function(){const t=await httpClient("/api/category?isEnable=true");if(t.isSuccess){const e=document.querySelector("#header-menu-container .swiper-wrapper");e.innerHTML="";let n="";t.data.forEach(t=>{n+=`<li class="swiper-slide">\n\t\t\t\t\t\t<a href="/product?category=${t.name}">\n\t\t\t\t\t\t\t<i>\n\t\t\t\t\t\t\t\t<svg viewBox="0 0 24 24">\n\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\td="${t.logo}">\n\t\t\t\t\t\t\t\t\t</path>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</i>\n\t\t\t\t\t\t\t<span>${t.name}</span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>`}),e.innerHTML=n,new Swiper("#header-menu-container",{paginationClickable:!0,preventClicks:!1,freeMode:!0,spaceBetween:0,slidesPerView:10,breakpoints:{768:{slidesPerView:5},1200:{slidesPerView:8}}})}}(),loadCartNumberItem(),t.addEventListener("submit",function(t){t.preventDefault();const n=e.value.trim();""!=n&&(window.location.href=window.location.origin+"/search?keyword="+n)}),e.addEventListener("focus",async function(){const t=await r();a();const e=document.createElement("div");e.className="overlay-suggest",e.addEventListener("click",a),document.body.appendChild(e),i(t)}),e.addEventListener("keyup",async function(){i(await r())}),n.click(function(t){var e=$(t.target);e.is(".header-search form")||e.is(".header-search form *")||e.is(".header-search-suggest")||e.is(".header-search-suggest *")||a()})}();