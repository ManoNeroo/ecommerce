!async function(){const e=document.getElementById("product-list"),t=document.getElementById("product-list-wrapper"),n=document.getElementById("product-list-null"),a=document.getElementById("product-list-section"),o=document.getElementById("list-brand"),c=document.getElementById("list-category"),i=document.getElementById("list-pricerange"),r=document.querySelectorAll("#filter-sort li"),l=[{id:0,name:"Dưới 10 triệu"},{id:1,name:"Từ 10 - 15 triệu"},{id:2,name:"Từ 15 - 20 triệu"},{id:3,name:"Từ 20 - 25 triệu"},{id:4,name:"Trên 25 triệu"}];toggleLoading(!0);let s=function(){var e=new URLSearchParams(window.location.search);let t={};return e.forEach((e,n)=>{t[n.toLocaleLowerCase()]=e}),t}();const d=await async function(){const e=await httpClient("/api/brand?isEnable=true&isSortByName=true");if(e.isSuccess)return e.data;return[]}(),u=await async function(){const e=await httpClient("/api/category?isEnable=true&isSortByName=true");if(e.isSuccess)return e.data;return[]}();f(d,"brand",o),f(u,"category",c),f(l,"pricerange",i);let m="&"+E(s,d,u,l,null);const p=await h(m,1);toggleLoading(!1),r.forEach(e=>{e.addEventListener("click",()=>(async function(e){let t=e.dataset.sort;const n=document.querySelector("#filter-sort li.active");""==t&&(t=null);m="&"+E(s,d,u,l,t),g&&(g.setPage(1),g.configs.rowCount<=g.configs.pageSize&&await h(m,1));n.classList.remove("active"),e.classList.add("active")})(e))});let g=null;function f(e,t,n){let a=[];s.hasOwnProperty(t)&&(a=s[t].split(",")),n.innerHTML="";let o=!1;e.forEach(e=>{let c=!1;b(a,e.name)&&(o=!0,c=!0);const i=L(c,e.name,e.name);i.querySelector("input[type='checkbox']").addEventListener("change",e=>y(e,t)),n.appendChild(i)});const c=L(!o,"Tất cả","");c.classList.add("all"),c.addEventListener("change",e=>y(e,t)),n.insertAdjacentElement("afterbegin",c)}function y(e,t){e.preventDefault();const{target:n}=e,{value:a}=n;let o=window.location.origin+window.location.pathname,c="",i=!0;if(n.checked){let e=!1;""==a&&(e=!0),c=w(function(e,t=!1){let{key:n,value:a}=e;if(n=removeAccent(n.trim()).toLocaleLowerCase(),a=removeAccent(a.trim()).toLocaleLowerCase(),s.hasOwnProperty(n)&&!t){const e=s[n].split(",");b(e,a)||(s[n]+=","+a)}else s[n]=a;""==s[n]&&delete s[n];return s}({key:t,value:a},e))}else{c=w(function(e){const{key:t,value:n}=e;if(s.hasOwnProperty(t)){const e=s[t].split(",");let a="";e.forEach(e=>{removeAccent(e).toLocaleLowerCase()!=removeAccent(n.trim()).toLocaleLowerCase()&&(a+=","+removeAccent(e).toLocaleLowerCase())}),""==a?delete s[t]:s[t]=a.slice(1)}return s}({key:t,value:a})),""==a&&(i=!1,n.checked=!0)}o+=""!=c?"?"+c:c,i&&(window.location.href=o)}async function h(t,n){toggleLoading(!0);let o=`/api/product/filter?page=${n}&onlyEnable=true&limit=12${"&"!=t?t:""}`;const c=await httpClient(o);if(c.isSuccess)if(c.data.length>0){v(!0);let t=c.totalItem>12;const n=function(e,t=!1){const n=document.createElement("div");n.className="row",t&&a.classList.add("none-radius-bottom");return e.forEach(e=>{const t=generateProductItem(e,"col-md-4");n.appendChild(t)}),n}(c.data,t);e.innerHTML="",e.appendChild(n)}else v(!1);else v(!1);return toggleLoading(!1),c}function w(e){let t="";if(e!={})for(let n in e)t+=`&${n}=${e[n]}`;return""!=t&&(t=t.slice(1)),t}function L(e,t,n){const a=document.createElement("div");return a.className="checkbox-item",a.innerHTML=`<label class="checkbox"><input type="checkbox" ${e?'checked="checked"':""} value="${n}"><i></i>${t}</label>`,a}function v(e){e?(t.style.display="block",n.style.display="none"):(t.style.display="none",n.style.display="block")}function E(e,t,n,a,o){let c="";if(e.hasOwnProperty("brand")){const n=e.brand.split(",");let a=!0;t.forEach(e=>{b(n,e.name)&&(a?(a=!1,c+=`&brand=${e.id}`):c+=`,${e.id}`)})}if(e.hasOwnProperty("category")){const t=e.category.split(",");let a=!0;n.forEach(e=>{b(t,e.name)&&(a?(a=!1,c+=`&category=${e.id}`):c+=`,${e.id}`)})}if(e.hasOwnProperty("pricerange")){const t=e.pricerange.split(",");let n=!0;a.forEach(e=>{b(t,e.name)&&(n?(n=!1,c+=`&priceRange=${e.id}`):c+=`,${e.id}`)})}return null!=o&&(c+="&isSort="+o),""!=c&&(c=c.slice(1)),c}function b(e,t){let n=!1;for(let a=0;a<e.length;a++){const o=e[a].trim();if(removeAccent(o).toLowerCase()==removeAccent(t.trim()).toLowerCase()){n=!0;break}}return n}p.isSuccess&&p.data.length>0&&(g=new Pagination({rowCount:p.totalItem,pageSize:p.limit,defaultPage:1},"#page-pagination")).onChangePage(async e=>{await h(m,e),window.scrollTo({top:400,left:0})})}();