const ARTICLE_TAB=document.getElementById("article-nav"),ARTICLE_TEXTAREA=document.getElementById("product-article-editor"),ARTICLE_FORM=document.getElementById("article-form");async function handleSaveArticle(){let e={content:"",productId:BASIC_FORM.querySelector("input[name='id']").value};e.content=tinymce.get("product-article-editor").getContent();const t=ARTICLE_FORM.querySelector("input[name='id']"),a=t.value;""==a||isNaN(Number(a))||(e.id=Number(a));const i=await httpClient("/api/productarticle","POST",e);i.isSuccess?(t.value=i.data.id,showAlert("success","Thành công","Bài viết đã được lưu lại!")):showAlert("failed","Thất bại","Có lỗi xảy ra, vui lòng thử lại!")}function handleFilePicker(e,t,a){var i=document.createElement("input");i.setAttribute("type","file"),i.setAttribute("accept","image/*"),i.onchange=async function(){var t=this.files[0];const a=new FormData;a.append("file",t);const i=await httpClient("/api/upload","POST",a);i.isSuccess?e(i.data,{title:t.name}):showAlert("failed","Lỗi","Có lỗi xảy ra trong quá trình upload file!")},i.click()}async function handleClickArticleTab(){const e=BASIC_FORM.querySelector("input[name='id']").value,t=await httpClient("/api/productarticle/product/"+e);if(t.isSuccess&&null!=t.data){ARTICLE_TEXTAREA.value=t.data.content,ARTICLE_FORM.querySelector("input[name='id']").value=t.data.id}tinymce.init(TINYMCEOPTIONS)}ARTICLE_TAB.addEventListener("click",handleClickArticleTab);const TINYMCEOPTIONS={selector:"#product-article-editor",plugins:"advlist anchor autolink autosave charmap code codesample directionality emoticons fullscreen help hr image imagetools insertdatetime link lists nonbreaking noneditable pagebreak preview save searchreplace table visualblocks visualchars wordcount",menubar:"file edit view insert format tools table help",toolbar:"undo redo | bold italic underline strikethrough | fontselect fontsizeselect formatselect | alignleft aligncenter alignright alignjustify | outdent indent |  numlist bullist | forecolor backcolor removeformat | pagebreak | charmap emoticons | fullscreen preview save | image template link anchor code codesample | ltr rtl",toolbar_sticky:!0,autosave_ask_before_unload:!0,autosave_interval:"30s",autosave_prefix:"{path}{query}-{id}-",autosave_restore_when_empty:!1,autosave_retention:"2m",height:550,image_caption:!0,image_title:!0,toolbar_mode:"sliding",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }",file_picker_types:"image",file_picker_callback:handleFilePicker,save_onsavecallback:handleSaveArticle};